[base]
path = {base}
default = master
network = overlay_dm

[master]
image = consul
port = 8500
volumes = {container}conf/service/consul:/root/consul/config
command = consul -server -bootstrap-expect 3 -data-dir=/root/consul/data -config-dir=/root/consul/config -client=0.0.0.0 -node={name} -dc={name}
alias = consul
slave = 2
slave_command = consul -server -data-dir=/root/consul/data -config-dir=/root/consul/config -client=0.0.0.0 -join={parent} -dc={parent}

[client]
image = consul
volumes = {container}conf/service/consul:/root/consul/config
command = consul -data-dir=/root/consul/data -client=0.0.0.0 -join=daemon-master -dc=daemon-master
alias = consul->consul_client